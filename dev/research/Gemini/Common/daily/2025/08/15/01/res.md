https://g.co/gemini/share/e61cb769e4bd
https://gemini.google.com/u/1/app/f7d0027fcdacbfcf

# Count tokens for Gemini models
https://firebase.google.com/docs/ai-logic/count-tokens

#
 «Входные файлы PDF обрабатываются как изображения, поэтому каждая страница PDF токенизируется так же, как и изображение»

# 
 наивный подход к загрузке PDF, особенно текстовых, в Gemini API по своей сути неэффективен. Это создает явную и острую потребность в предварительной обработке PDF-файлов на стороне клиента.
 
# PyMuPDF4LLM	
Преобразование в Markdown с сохранением структуры (заголовки, списки, таблицы).	
Подготовки данных для RAG-систем и передачи в LLM с сохранением контекста и разметки.

Для большинства RAG-сценариев **PyMuPDF4LLM является предпочтительным выбором**, так как он преобразует содержимое PDF, включая таблицы, в чистый Markdown, который идеально подходит для понимания языковыми моделями.

# PyMuPDF (fitz)	
Высокая скорость, универсальность, низкое потребление ресурсов.	
Общего извлечения текста, изображений и метаданных из разнообразных PDF-файлов.

# pdfplumber	
Точное извлечение таблиц и данных на основе визуального расположения.	
Документов со сложной структурой, где важно сохранить табличные данные в исходном виде.

# Camelot / tabula-py	
Специализированные инструменты для извлечения таблиц.	
Задач, где основной целью является извлечение структурированных табличных данных.

# Сравнительный анализ эффективности
Преимущества гибридного подхода становятся очевидными при сравнении количества токенов. 
Рассмотрим гипотетический 10-страничный текстовый отчет в формате A4.

Метод обработки	Примерное количество токенов	Экономия
Метод 1: Прямая загрузка PDF («как изображение»)	**25,000 - 50,000+**	-
Метод 2: Гибридный подход («извлечение текста»)	**2,500 - 4,000**	**~90%**